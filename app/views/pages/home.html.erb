<div class="container mx-auto ">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
     
      <% if user_signed_in? %>
        <div class="mt-4">
          <p class="lead">Bienvenue <%= current_user.user_name %>!</p>

          <div class="card mx-auto" style="width: 80%;">
            <div class="card-body custom-background">
              <h2 class="card-title text-center">Choisissez vos préférences de café</h2>

              <% if current_user.debutant? %>
                <%= form_with(model: @preference, local: true, class: "mt-3") do |form| %>
                  <div class="form-group ">
                    <%= form.label :coffee_form, "Forme de café" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :coffee_form, { multiple: true, class: 'tag-selector', id: 'coffee_form_capsule' }, 'Capsule' %>
                        <label for="coffee_form_capsule">Capsule</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :coffee_form, { multiple: true, class: 'tag-selector', id: 'coffee_form_grain' }, 'Grain' %>
                        <label for="coffee_form_grain">Grain</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <%= form.label :weekly_consumption, "Nombre de cafés par semaine" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :weekly_consumption, { multiple: true, class: 'tag-selector', id: 'weekly_consumption_2' }, '2' %>
                        <label for="weekly_consumption_2">2</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :weekly_consumption, { multiple: true, class: 'tag-selector', id: 'weekly_consumption_4' }, '4' %>
                        <label for="weekly_consumption_4">4</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :weekly_consumption, { multiple: true, class: 'tag-selector', id: 'weekly_consumption_6' }, 'Plus de 6' %>
                        <label for="weekly_consumption_6">Plus de 6</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <%= form.label :coffee_type, "Type de café" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :coffee_type, { multiple: true, class: 'tag-selector', id: 'coffee_type_arabica' }, 'Arabica' %>
                        <label for="coffee_type_arabica">Arabica</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :coffee_type, { multiple: true, class: 'tag-selector', id: 'coffee_type_robusta' }, 'Robusta' %>
                        <label for="coffee_type_robusta">Robusta</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group mb-4">
                    <%= form.submit "Enregistrer", class: "btn btn-custom" %>
                    <%= link_to "Remettre à plus tard", coffees_path, class: "btn btn-secondary btn-custom ml-2" %>
                  </div>
                <% end %>

              <% elsif current_user.intermediaire? %>
                <%= form_with(model: @preference, url: user_preferences_path(current_user), local: true, class: "mt-3") do |form| %>
                  <div class="form-group">
                    <%= form.label :coffee_form, "Forme de café" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :coffee_form, { multiple: true, class: 'tag-selector', id: 'coffee_form_capsule' }, 'Capsule' %>
                        <label for="coffee_form_capsule">Capsule</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :coffee_form, { multiple: true, class: 'tag-selector', id: 'coffee_form_grain' }, 'Grain' %>
                        <label for="coffee_form_grain">Grain</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <%= form.label :weekly_consumption, "Nombre de cafés par semaine" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :weekly_consumption, { multiple: true, class: 'tag-selector', id: 'weekly_consumption_2' }, '2' %>
                        <label for="weekly_consumption_2">2</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :weekly_consumption, { multiple: true, class: 'tag-selector', id: 'weekly_consumption_4' }, '4' %>
                        <label for="weekly_consumption_4">4</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :weekly_consumption, { multiple: true, class: 'tag-selector', id: 'weekly_consumption_6' }, 'Plus de 6' %>
                        <label for="weekly_consumption_6">Plus de 6</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <%= form.label :coffee_type, "Type de café" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :coffee_type, { multiple: true, class: 'tag-selector', id: 'coffee_type_arabica' }, 'Arabica' %>
                        <label for="coffee_type_arabica">Arabica</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :coffee_type, { multiple: true, class: 'tag-selector', id: 'coffee_type_robusta' }, 'Robusta' %>
                        <label for="coffee_type_robusta">Robusta</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <%= form.label :coffee_origin, "Origine du café" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :coffee_origin, { multiple: true, class: 'tag-selector', id: 'coffee_origin_bresil' }, 'Brésil' %>
                        <label for="coffee_origin_bresil">Brésil</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :coffee_origin, { multiple: true, class: 'tag-selector', id: 'coffee_origin_colombie' }, 'Colombie' %>
                        <label for="coffee_origin_colombie">Colombie</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :coffee_origin, { multiple: true, class: 'tag-selector', id: 'coffee_origin_ethiopie' }, 'Éthiopie' %>
                        <label for="coffee_origin_ethiopie">Éthiopie</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group mb-4">
                    <%= form.submit "Enregistrer", class: "btn btn-custom" %>
                    <%= link_to "Remettre à plus tard", coffees_path, class: "btn btn-secondary btn-custom ml-2" %>
                  </div>
                <% end %>

              <% elsif current_user.avance? %>
                <%= form_with(model: @preference, url: user_preferences_path(current_user), local: true, class: "mt-3") do |form| %>
                  <div class="form-group">
                    <%= form.label :coffee_form, "Forme de café" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :coffee_form, { multiple: true, class: 'tag-selector', id: 'coffee_form_capsule' }, 'Capsule' %>
                        <label for="coffee_form_capsule">Capsule</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :coffee_form, { multiple: true, class: 'tag-selector', id: 'coffee_form_grain' }, 'Grain' %>
                        <label for="coffee_form_grain">Grain</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <%= form.label :weekly_consumption, "Nombre de cafés par semaine" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :weekly_consumption, { multiple: true, class: 'tag-selector', id: 'weekly_consumption_2' }, '2' %>
                        <label for="weekly_consumption_2">2</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :weekly_consumption, { multiple: true, class: 'tag-selector', id: 'weekly_consumption_4' }, '4' %>
                        <label for="weekly_consumption_4">4</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :weekly_consumption, { multiple: true, class: 'tag-selector', id: 'weekly_consumption_6' }, 'Plus de 6' %>
                        <label for="weekly_consumption_6">Plus de 6</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <%= form.label :coffee_type, "Type de café" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :coffee_type, { multiple: true, class: 'tag-selector', id: 'coffee_type_arabica' }, 'Arabica' %>
                        <label for="coffee_type_arabica">Arabica</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :coffee_type, { multiple: true, class: 'tag-selector', id: 'coffee_type_robusta' }, 'Robusta' %>
                        <label for="coffee_type_robusta">Robusta</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <%= form.label :coffee_origin, "Origine du café" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :coffee_origin, { multiple: true, class: 'tag-selector', id: 'coffee_origin_bresil' }, 'Brésil' %>
                        <label for="coffee_origin_bresil">Brésil</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :coffee_origin, { multiple: true, class: 'tag-selector', id: 'coffee_origin_colombie' }, 'Colombie' %>
                        <label for="coffee_origin_colombie">Colombie</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :coffee_origin, { multiple: true, class: 'tag-selector', id: 'coffee_origin_ethiopie' }, 'Éthiopie' %>
                        <label for="coffee_origin_ethiopie">Éthiopie</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <%= form.label :brewing_method, "Méthode de préparation préférée" %><br>
                    <div class="tag-wrapper">
                      <div class="tag-item">
                        <%= form.check_box :brewing_method, { multiple: true, class: 'tag-selector', id: 'brewing_method_espresso' }, 'Espresso' %>
                        <label for="brewing_method_espresso">Espresso</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :brewing_method, { multiple: true, class: 'tag-selector', id: 'brewing_method_filtre' }, 'Filtre' %>
                        <label for="brewing_method_filtre">Filtre</label>
                      </div>
                      <div class="tag-item">
                        <%= form.check_box :brewing_method, { multiple: true, class: 'tag-selector', id: 'brewing_method_aeropress' }, 'Aeropress' %>
                        <label for="brewing_method_aeropress">Aeropress</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group mb-4">
                    <%= form.submit "Enregistrer", class: "btn btn-custom" %>
                    <%= link_to "Remettre à plus tard", coffees_path, class: "btn btn-secondary btn-custom ml-2" %>
                  </div>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
      <% else %>
           <div class="home-page-unauthenticated">
          <!-- Contenu pour les utilisateurs non connectés -->
          
          <div class="home-page-unauthenticated">
  <div class="unconnect">
    <h1>Bienvenue</h1>
    <p class="lead">Vous n'êtes pas connecté.</p>
    <%= link_to 'S\'inscrire', new_user_registration_path, class: "mr-2 btn-custom" %>
    <%= link_to 'Se connecter', new_user_session_path, class: "btn-custom" %>
  </div>
</div>
      <% end %>
    </div>
  </div>
</div>
